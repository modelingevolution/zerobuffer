# Auto-generated by harmony-cpp-gen
# DO NOT EDIT - This file is auto-generated

cmake_minimum_required(VERSION 3.20)

# Generated test sources
set(GENERATED_TEST_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/test_basic_communication.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_process_lifecycle.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_error_handling.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_edge_cases.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_corruption_detection.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_synchronization.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_system_resources.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_platform_specific.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_performance_monitoring.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_advanced_error_handling.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_stress_tests.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_protocol_compliance.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_duplex_channel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/test_benchmarks.cpp
)

# Create test executable
add_executable(zerobuffer_generated_tests
    ${GENERATED_TEST_SOURCES}
)

# Add step definition sources directly
set(STEP_DEFINITION_SOURCES
    ${CMAKE_SOURCE_DIR}/step_definitions/step_registry.cpp
    ${CMAKE_SOURCE_DIR}/step_definitions/test_context.cpp
    ${CMAKE_SOURCE_DIR}/step_definitions/basic_communication_steps.cpp
    ${CMAKE_SOURCE_DIR}/step_definitions/buffer_naming_service.cpp
    ${CMAKE_SOURCE_DIR}/step_definitions/test_data_patterns.cpp
    ${CMAKE_SOURCE_DIR}/step_definitions/duplex_channel_steps.cpp
    # Add more step definition files as they are implemented:
    # ${CMAKE_SOURCE_DIR}/step_definitions/edge_cases_steps.cpp
    # ${CMAKE_SOURCE_DIR}/step_definitions/error_handling_steps.cpp
    # etc.
)

# Add step definitions to the test executable
target_sources(zerobuffer_generated_tests
    PRIVATE
    ${STEP_DEFINITION_SOURCES}
)

# Link with required libraries
target_link_libraries(zerobuffer_generated_tests
    PRIVATE
    zerobuffer
    nlohmann_json::nlohmann_json
    GTest::gtest
    GTest::gtest_main
    Threads::Threads
)

# Include directories
target_include_directories(zerobuffer_generated_tests
    PRIVATE
    ${CMAKE_SOURCE_DIR}
    ${CMAKE_SOURCE_DIR}/step_definitions
)

# Set C++ standard
target_compile_features(zerobuffer_generated_tests PRIVATE cxx_std_20)

# Add tests to CTest
include(GoogleTest)
gtest_discover_tests(zerobuffer_generated_tests
    PROPERTIES TIMEOUT 30
)
