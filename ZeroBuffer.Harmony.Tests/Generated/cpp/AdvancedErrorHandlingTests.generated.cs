// <auto-generated />
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Threading.Tasks;
using Xunit;
using Xunit.Abstractions;
using ModelingEvolution.Harmony.Core;
using ModelingEvolution.Harmony.Execution;
using ModelingEvolution.Harmony.ProcessManagement;
using Microsoft.Extensions.Logging.Abstractions;
using ZeroBuffer.Harmony.Tests;

namespace ZeroBuffer.Harmony.Tests.Cpp;

public class AdvancedErrorHandlingTests : HarmonyTestBase
{
    public AdvancedErrorHandlingTests(ITestOutputHelper output) : base(output) { }

    #region Static Test Data
    private static readonly string Test_10_1_Partial_Initialization_Failures_reader_cpp_Json = @"{""TestId"":""cpp-test-10-1---partial-initialization-failures"",""FeatureId"":10,""ScenarioName"":""Test 10.1 - Partial Initialization Failures"",""ScenarioDescription"":null,""Tags"":[],""Platforms"":{""reader"":""cpp""},""Background"":[{""Type"":""Given"",""Text"":""the test environment is initialized"",""Process"":null,""ProcessedText"":""the test environment is initialized"",""Parameters"":{}},{""Type"":""Given"",""Text"":""all processes are ready"",""Process"":null,""ProcessedText"":""all processes are ready"",""Parameters"":{}}],""Steps"":[{""Type"":""Given"",""Text"":""the test creates shared memory successfully for \u0027test-partial\u0027"",""Process"":null,""ProcessedText"":""the test creates shared memory successfully for \u0027test-partial\u0027"",""Parameters"":{}},{""Type"":""When"",""Text"":""simulate failure creating sem-w semaphore"",""Process"":null,""ProcessedText"":""simulate failure creating sem-w semaphore"",""Parameters"":{}},{""Type"":""Then"",""Text"":""the \u0027reader\u0027 process should clean up shared memory"",""Process"":""reader"",""ProcessedText"":""should clean up shared memory"",""Parameters"":{}},{""Type"":""Then"",""Text"":""the \u0027reader\u0027 process should throw appropriate exception"",""Process"":""reader"",""ProcessedText"":""should throw appropriate exception"",""Parameters"":{}},{""Type"":""Then"",""Text"":""the test should verify no resources leaked"",""Process"":""reader"",""ProcessedText"":""the test should verify no resources leaked"",""Parameters"":{}}]}";

    #endregion

    #region Scenarios Collection
    public static IEnumerable<ScenarioExecution> Scenarios => new[]
    {
        DeserializeScenarioStatic(Test_10_1_Partial_Initialization_Failures_reader_cpp_Json)
    };
    #endregion

    #region Test Methods
    [Fact(DisplayName = "Test 10.1 - Partial Initialization Failures [reader=cpp]")]
    [Trait("Scenario", "Test 10.1 - Partial Initialization Failures")]
    [Trait("Platform", "cpp")]
    [Trait("Uses", "cpp")]
    [Trait("Feature", "10-AdvancedErrorHandling")]    public async Task Test_10_1_Partial_Initialization_Failures_reader_cpp()
    {
        var scenario = DeserializeScenario(Test_10_1_Partial_Initialization_Failures_reader_cpp_Json);
        await ExecuteScenarioAsync(scenario);
    }


    #endregion
}